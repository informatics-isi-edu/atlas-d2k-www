<head>
	<!-- Google Tag Manager -->
	<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-N92W9MT');</script>
	<!-- End Google Tag Manager -->
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="/assets/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/font-awesome.css"/>
	<link rel="stylesheet" type="text/css" href="/slick/slick.css">
	<link rel="stylesheet" type="text/css" href="/slick/slick-theme.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/colorbox.css">
	<link rel="stylesheet" type="text/css" href="/assets/css/custom.css"  media="all" />

	<script src="/assets/js/jquery-latest.min.js"></script>
 	<script src="/assets/js/bootstrap.min.js"></script>
  	<script src="/assets/js/jquery.activeNavigation.js"></script>
	<script src="/assets/js/jquery.colorbox-min.js"></script>

	<script src="https://www.rebuildingakidney.org/chaise/scripts/vendor/jquery.cookie.js?v=1e3faa7fc49484964ecae46ca9494f35"></script>


	<script>
	function search(searchParam, searchText) {
		searchParam = typeof searchParam === "string" ? searchParam : "";
		switch(searchParam){
			case 'anatomy':
				schemaName = 'Vocabulary';
				tableName = 'Anatomy';
				break;
			case "species":
				schemaName = 'Vocabulary';
				tableName = 'Species';
				break;
			case 'proteins':
				schemaName = 'Common';
				tableName = 'Protein';
				break;
			case "gene":
			default: // all
				schemaName = 'Common';
				tableName = 'Gene';
				break;
		}

		// the origin of webstie.
		var origin = window.location.protocol + "//" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');
		var pathArray = [origin, 'chaise', 'recordset'];

		// TODO this "if" case should be removed when the search-box annotation
		//      is applied to customize the columns in the search box.
		if (searchParam === "gene" || searchParam == "species") {
			var columnName = (searchParam === "gene") ? "NCBI_Symbol" : "Name";

			var path = ERMrest.createPath("2", schemaName, tableName);
			pathArray.push(path);
			if (typeof searchText === "string" && searchText.trim().length > 0) {
				// create custom filter
				var query = columnName + "::ciregexp::" + searchText.trim() + ";Synonyms::ciregexp::" + searchText.trim();
				pathArray.push(query);
			}

		} else {
			var facets;
			if (typeof searchText === "string" && searchText.trim().length > 0) {
				// create the facet object so we can pass it to ermrestjs
				facets = {
					"and": [{ "sourcekey": "search-box", "search": [searchText.trim()] }]
				};
			}

			// create a path that chaise understands
			var path = ERMrest.createPath("2", schemaName, tableName, facets);
			pathArray.push(path);
		}

		// create the url to open
		var finalURL = pathArray.join("/") + "?pcid=static/home/search";

		// open the url
		window.open(finalURL);
	}
  </script>

	<noscript>
	 <p>For full functionality of this site it is necessary to enable JavaScript.
	 Here are the <a href="http://www.enable-javascript.com/" target="_blank">
	 instructions how to enable JavaScript in your web browser</a>.</p>
	</noscript>
	
	<script src="/chaise/lib/navbar/navbar.app.js"></script>

	</head>
